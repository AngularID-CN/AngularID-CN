# [ç¿»è¯‘] Angular Libary ç³»åˆ—ä¹‹ æ„å»ºå’Œæ‰“åŒ…

æ„å»ºï¼Œæ‰“åŒ…å¹¶åœ¨å…¶ä»–çš„ Angular åº”ç”¨ä¸­çœŸæ­£ä½¿ç”¨åˆ›é€ çš„ Angular åº“ã€‚

> åŸæ–‡é“¾æ¥ï¼š [The Angular Library Series - Building and Packaging](https://blog.angularindepth.com/creating-a-library-in-angular-6-part-2-6e2bc1e14121)

> åŸæ–‡ä½œè€…ï¼š [Todd Palmer](https://blog.angularindepth.com/@palmer_todd?source=post_header_lockup)

> è¯‘è€…æŒ‰ï¼šæœ¬æ–‡ä½¿ç”¨ åº“ æŒ‡ä»£ Angular Library çš„æ¦‚å¿µã€‚
> 
> æœ¬æ–‡æ˜¯ Angular Libaray ç³»åˆ—çš„ç¬¬äºŒç¯‡æ–‡ç« ï¼Œæœ¬ç³»åˆ—å…±æœ‰ä¸‰ç¯‡æ–‡ç« ï¼Œæ¶µç›–ä»åˆ›å»ºåˆ°æ‰“åŒ…å†åˆ°å‘å¸ƒçš„å…¨å¥—æµç¨‹ã€‚
> 
> ä¸ºäº†è¡Œæ–‡æ–¹ä¾¿ï¼Œä»¥ä¸‹å‡ä»¥æˆ‘/æˆ‘ä»¬æŒ‡ä»£åŸä½œè€…ã€‚
>
> è¯‘è€…ï¼š[å°Šé‡](https://github.com/sawyerbutton)ï¼Œæ ¡å¯¹è€…ï¼š[Ice Panpan](https://github.com/TanYiBing)
<p align="center"> 
    <img src="../assets/angular-83/1.jpeg">
</p>

> åŸä½œè€…æŒ‰ï¼š[å¦‚æœä½ æ˜¯ Angular In Depth çš„ç²‰ä¸ï¼Œè¯·åœ¨æ¨ç‰¹ä¸Šæ”¯æŒæˆ‘ä»¬](https://blog.angularindepth.com/fan-of-angular-in-depth-and-my-writings-support-us-on-twitter-e3bfcbabb4b1)

åœ¨ Angular Library ç³»åˆ—çš„ç¬¬äºŒç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šè®¨è®ºä»¥ä¸‹å†…å®¹ï¼š

1. æ¢ç´¢æ„å»ºåº“çš„è¿‡ç¨‹ã€‚
2. ä½¿ç”¨ npm pack æ‰“åŒ…åº“ã€‚
3. åœ¨å…¶ä»– Angular åº”ç”¨ä¸­ä»çœŸæ­£æ„ä¹‰ä¸Šä½¿ç”¨æˆ‘ä»¬çš„åº“ã€‚ï¼ˆåœ¨ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ä¸­æˆ‘ä»¬æ˜¯åœ¨ä¸åˆ›é€ çš„åº“åŒä¸€å·¥ä½œåŒºå†…çš„é¡¹ç›®ä¸­ä½¿ç”¨åº“æœ¬èº«ï¼Œè€Œæœ¬æ–‡ä¼šåœ¨å·¥ä½œåŒºå¤–çš„é¡¹ç›®ä¸­ä½¿ç”¨åˆ›é€ çš„åº“ï¼‰

## å¿«é€Ÿå›é¡¾ä¸€ä¸‹

åœ¨ç³»åˆ—çš„[ç¬¬ä¸€ç¯‡æ–‡ç« ](https://blog.angularindepth.com/creating-a-library-in-angular-6-87799552e7e5)ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Angular CLI åˆ›å»ºäº†ä¸€ä¸ªå·¥ä½œåŒºã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨ Angular CLI åˆ›å»ºäº†ä¸€ä¸ª Angular åº“å¹¶å°†å…¶å‘½åä¸º **example-ng6-lib**ã€‚ç»è¿‡ä¸Šè¿°æ“ä½œï¼Œæˆ‘ä»¬çš„å·¥ä½œåŒºä¸­ç”Ÿæˆäº†ä¸¤ä¸ªé¡¹ç›®ï¼š

- åœ¨ projects/example-ng6-lib ç›®å½•ä¸‹çš„åº“é¡¹ç›®ã€‚
- åœ¨ src/app ç›®å½•ä¸‹çš„ä¸»åº”ç”¨é¡¹ç›®

æˆ‘ä»¬å¯ä»¥å°†åº“å¼•å…¥åˆ°ä¸»åº”ç”¨ä¸­å¹¶ä½¿ç”¨åº“ä¸­æ–°æ·»åŠ çš„ç»„ä»¶å¯¹åº“è¿›è¡Œæµ‹è¯•ã€‚

ä¸ºäº†æ–¹ä¾¿ä½ ç†è§£ä¸Šä¸€ç¯‡çš„å†…å®¹ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª Github ä»“åº“ [t-palmer/example-ng6-lib](https://github.com/t-palmer/example-ng6-lib)ï¼Œå…¶åŒ…å«äº†[ä¸Šä¸€ç¯‡æ–‡ç« ](https://blog.angularindepth.com/creating-a-library-in-angular-6-87799552e7e5)ä¸­çš„å…¨éƒ¨ä»£ç ã€‚

## æ„å»ºæˆ‘ä»¬çš„åº“

ç°åœ¨è®©æˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªç”¨äºç®€åŒ–æ„å»ºçš„è„šæœ¬ï¼Œå¼€å§‹æˆ‘ä»¬çš„ Angular åº“æ¢ç´¢ä¹‹è·¯çš„ç¬¬äºŒç«™ã€‚å‘æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ª build_lib è„šæœ¬ï¼š

```json
"scripts": {
  ...
  "build_lib": "ng build example-ng6-lib",
  ...
},
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡ `npm run build_lib` æŒ‡ä»¤å»æ„å»ºæˆ‘ä»¬çš„åº“äº†ã€‚
è¯¥æŒ‡ä»¤ä¼šåœ¨å·¥ä½œåŒºçš„ **dist** ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º **example-ng6-lib** çš„å­ç›®å½•ã€‚

åœ¨å®Œæˆå¯¹äºåº“çš„æ„å»ºä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `ng build` å¯¹ä¸»åº”ç”¨è¿›è¡Œæ„å»ºã€‚
è¯¥æŒ‡ä»¤ä¼šåœ¨å·¥ä½œåŒºçš„ **dist** ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º **example-ng6-lib-app** çš„å­ç›®å½•ã€‚

## package.json æ–‡ä»¶

å¤ªç³Ÿç³•äº†ï¼Œä¸æƒ³è¦æ›´å¤šçš„ package.json æ–‡ä»¶äº†ã€‚

æ˜¯çš„ï¼Œåœ¨åº“æ„å»ºå®Œæˆåï¼Œå½“å‰å·¥ä½œåŒºå†…è‡³å°‘å·²ç»æœ‰3ä¸ª package.json æ–‡ä»¶äº†ã€‚è¿™äº› package.json æ–‡ä»¶å¯èƒ½ä¼šè®©ä½ è§‰å¾—å›°æƒ‘ä¸ºéš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨ç†é¡ºè¿™äº› package.json æ–‡ä»¶çš„æ€è·¯ã€‚

### æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶

è¿™ä¸ª package.json æ˜¯åº“å·¥ä½œåŒºçš„**ä¸» package.json æ–‡ä»¶**ã€‚æˆ‘ä»¬ç”¨è¯¥æ–‡ä»¶æ¥åˆ—å‡ºä¸»åº”ç”¨å’Œåº“éƒ½éœ€è¦çš„ä¾èµ–é¡¹ã€‚è¿è¡Œå’Œæ„å»ºä¸»åº”ç”¨å’Œåº“æ‰€ä¾èµ–çš„æ‰€æœ‰åŒ…éƒ½å¿…é¡»åˆ—ä¸¾åœ¨è¯¥æ–‡ä»¶ä¸­ã€‚

å½“æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨ **npm install** æŒ‡ä»¤æ—¶ï¼Œæ–°åŠ å…¥çš„åŒ…å°†ä¼šæ·»åŠ åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚

### åº“é¡¹ç›®ä¸­çš„ package.json æ–‡ä»¶

**åº“é¡¹ç›®ä¸­çš„ package.json æ–‡ä»¶**ä½äº **projects\example-ng6-lib** ç›®å½•ä¸‹ï¼Œå…¶ç”¨äºå‘ŠçŸ¥ **ng-packagr** å°†ä»€ä¹ˆä¿¡æ¯æ”¾å…¥åº“é¡¹ç›®çš„å‘å¸ƒç‰ˆ package.json æ–‡ä»¶ä¸­ã€‚å…¶ package.json æ–‡ä»¶ä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„éƒ¨åˆ†éœ€è¦æ³¨æ„ï¼š

- åç§°

è¿™é‡Œçš„åç§°æ˜¯æŒ‡åº“çš„åç§°ã€‚æœªæ¥å¦‚æœæŸä½ç”¨æˆ·å¼•å…¥åº“ä¸­çš„æ¨¡å—ï¼Œè¿™ä¸ªåç§°å°±æ˜¯å‡ºç°åœ¨ `from` éƒ¨åˆ†å†…çš„å¼•å·ä¸­çš„åç§°ã€‚ä¸¾ä¾‹æ¥è¯´å¤§æ¦‚å°±æ˜¯ï¼š

```ts
import { ExampleNg6LibModule } from 'example-ng6-lib';
```

- ç‰ˆæœ¬å·

ç‰ˆæœ¬å·å¯¹äºåº“è€Œè¨€æ ¼å¤–é‡è¦ï¼Œç‰ˆæœ¬å·èƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·åˆ¤æ–­ä»–ä»¬æ˜¯å¦åœ¨ä½¿ç”¨åº“çš„æœ€æ–°ç‰ˆæœ¬ã€‚ä½¿ç”¨ npm åŒ…çš„å¼€å‘è€…é€šå¸¸ä¼šé»˜è®¤ä½ éµå¾ª[ç‰ˆæœ¬å·è¯­ä¹‰åŒ–](https://semver.org/)è§„åˆ™ã€‚

- ä¾èµ–é¡¹

æ­¤é¡¹ç›®ä¸­åªåŒ…å«ç”¨äºè¿è¡Œåº“æ‰€å¿…é¡»çš„ä¾èµ–é¡¹ã€‚å› æ­¤ï¼Œä½ å°†ä¼šçœ‹åˆ° **dependencies** å’Œ **peerDependencies**ï¼Œä½†æ˜¯æ²¡æœ‰ **devDependencies**ã€‚

ä½ åŒæ ·åº”è¯¥åœ¨è¯¥ package.json æ–‡ä»¶ä¸­æ·»åŠ é‚£äº›å¸¸è§çš„ npm å†…å®¹æ¯”å¦‚ï¼šLicenseï¼Œä½œè€…ï¼Œä»“åº“åœ°å€ç­‰ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“ä½ ä½¿ç”¨ **npm install** æŒ‡ä»¤æ—¶ï¼Œæ–°å®‰è£…çš„åŒ…åªä¼šè¢«æ·»åŠ åˆ°æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ä¸­è€Œä¸æ˜¯åœ¨åº“é¡¹ç›®çš„ package.json æ–‡ä»¶ä¸­ã€‚å› æ­¤ï¼Œå½“ä½ å®‰è£…ä¸€ä¸ªåº“æ‰€éœ€è¦çš„åŒ…æ—¶ï¼Œä½ éœ€è¦å°†åŒ…åç§°æ‰‹åŠ¨æ·»åŠ åˆ°åº“é¡¹ç›®çš„ package.json æ–‡ä»¶ä¾èµ–é¡¹ä¸­ã€‚åœ¨åç»­çš„æ–‡ç« ä¸­æˆ‘ä»¬å°†ä¼šè®¨è®º **dependencies** å’Œ **peerDependencies** çš„åŒºåˆ«ã€‚

## åº“çš„å‘å¸ƒç‰ˆæœ¬ package.json æ–‡ä»¶


å½“æˆ‘ä»¬æ„å»ºåº“æ—¶**åº“çš„å‘å¸ƒç‰ˆæœ¬ package.json æ–‡ä»¶** ç”± **ng-packagr** ç”Ÿæˆäº **dist\example-ng6-lib** æ–‡ä»¶ç›®å½•ä¸‹ã€‚è¯¥ package.json æ–‡ä»¶ä¼šéšç€æˆ‘ä»¬çš„åº“ä¸€å¹¶å‘å¸ƒã€‚

ä½¿ç”¨æˆ‘ä»¬çš„åº“çš„å¼€å‘è€…å°†ä¼šä½¿ç”¨ `npm install` æŒ‡ä»¤å®‰è£…è¯¥æ–‡ä»¶ä¸­æ‰€æ¶‰åŠçš„é‚£äº›ä¾èµ–é¡¹ã€‚

å› ä¸ºå‘å¸ƒç‰ˆæœ¬çš„ package.json æ–‡ä»¶ç”± **ng-packagr** ç”Ÿæˆï¼Œæ•…è€Œæˆ‘ä»¬ä¸åº”ç›´æ¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœä½ å¸Œæœ›å¯¹å‘å¸ƒç‰ˆæœ¬çš„ package.json æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œéœ€è¦æ›´æ–° projects\example-ng6-lib ç›®å½•ä¸‹çš„ **åº“é¡¹ç›®çš„ package.json** æ–‡ä»¶ã€‚**ng-packagr** ä»¥ **åº“é¡¹ç›®çš„ package.json** æ–‡ä»¶ä¸ºåŸºå‡†å»ç”Ÿæˆå‘å¸ƒç‰ˆæœ¬çš„package.json æ–‡ä»¶ã€‚

> è®°ä½ï¼æ°¸è¿œä¸è¦ç›´æ¥å¯¹å‘å¸ƒç‰ˆæœ¬çš„ package.json æ–‡ä»¶ä½œå‡ºä¿®æ”¹ã€‚

## æ‰“åŒ…åº“

æ‰“åŒ…åº“æ˜¯æŒ‡å°†ç”Ÿæˆçš„å‘å¸ƒæ–‡ä»¶è¿›è¡Œæ‰“åŒ…ä»¥ç”Ÿæˆä¸€ä¸ª tgz æ–‡ä»¶ç”¨ä»¥æ‰‹åŠ¨åˆ†äº«æˆ–å‘å¸ƒäº npmã€‚

è®©æˆ‘ä»¬ä½¿ç”¨ **npm pack** æŒ‡ä»¤åœ¨æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œè¯¥è„šæœ¬ç”¨äºæ‰“åŒ…ç”Ÿæˆçš„åº“ã€‚

```json
"scripts": {
  ...
  "npm_pack": "cd dist/example-ng6-lib && npm pack",
  ...
},
```

ç°åœ¨æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æŒ‡ä»¤ `npm run npm_pack` å°±å¯ä»¥å®Œæˆå¯¹åº“çš„æ‰“åŒ…å•¦ğŸ˜ï¼
è¿™æ¡å‘½ä»¤ç”¨äºå°†æ–‡ä»¶ç›®å½•æŒ‡å‘å·¥ä½œåŒºçš„ **dist** æ–‡ä»¶å¤¹å¹¶æ‰§è¡Œ **npm pack** æŒ‡ä»¤ï¼Œå‘½ä»¤å°†ä¼šåœ¨åŒä¸€ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªå½¢å¦‚ **example-ng6-lib-0.0.1.tgz** çš„åŒ…æ–‡ä»¶ã€‚

å°±åƒæ˜¯ä»»ä½•ä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜é‚£æ ·ï¼Œæˆ‘å¾ˆåŒå€¦åšé‡å¤çš„äº‹æƒ…ã€‚æ‰€ä»¥æˆ‘åˆ›é€ äº†ä¸€ä¸ªæ–°çš„è„šæœ¬åŒ…å« build_lib å’Œ npm_pack ä¸¤ä¸ªè„šæœ¬çš„å†…å®¹ã€‚å°†ä¸‹è¿°å†…å®¹åŠ å…¥åˆ°ä¸»ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ä¸­çš„è„šæœ¬å¯¹è±¡ä¸­å»ï¼š

```json
"package": "npm run build_lib && npm run npm_pack"
```

ç°åœ¨çœ‹çœ‹**ä¸»ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶**ï¼Œå’Œæ„å»ºæ‰“åŒ…ç›¸å…³çš„è„šæœ¬å¦‚ä¸‹ï¼š

```json
"scripts": {
  ...
  "build_lib": "ng build example-ng6-lib",
  "npm_pack": "cd dist/example-ng6-lib && npm pack",
  "package": "npm run build_lib && npm run npm_pack"
},
```

æ³¨æ„ï¼Œæ‰§è¡Œ **package è„šæœ¬**å°†ä¼šé¡ºåºæ‰§è¡Œ **build_lib è„šæœ¬** å’Œ **npm_pack è„šæœ¬**ã€‚

ç¡®ä¿åœ¨è¿™ä¸€æ­¥æ—¶ï¼Œä½ å·²ç»æˆåŠŸä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å®Œæˆå¯¹ä½ çš„åº“çš„æ„å»ºå’Œæ‰“åŒ…ï¼š

```bash
npm run package
```

package è„šæœ¬åšäº†ä¸¤ä»¶äº‹ï¼š

1. åœ¨ dist/example-ng6-lib ç›®å½•ä¸‹æ„å»ºäº†åº“ã€‚
2. åœ¨åŒä¸€ç›®å½•ä¸‹ä½¿ç”¨ **npm pack** æŒ‡ä»¤å°†åº“æ‰“åŒ…ä¸ºä¸€ä¸ª npm åŒ…ï¼Œå…¶å½¢å¦‚ï¼šexample-ng6-lib-0.0.1.tgzã€‚

éœ€è¦æ³¨æ„ï¼å³ä½¿ç”Ÿæˆçš„åŒ…æ˜¯ tgz æ–‡ä»¶ï¼Œä½ ä¹Ÿä¸èƒ½ä»¥ tgz æ ¼å¼ç›´æ¥å‹ç¼© dist ç›®å½•ä½œä¸ºåŒ…ã€‚

> æ€»æ˜¯ä½¿ç”¨ npm pack åˆ›å»º tgz æ–‡ä»¶

## åœ¨å…¶ä»– Angular åº”ç”¨ä¸­ä½¿ç”¨åº“

ç°åœ¨æˆ‘ä»¬å·²ç»æ„å»ºå’Œæ‰“åŒ…äº†ä¸€ä¸ª Angular åº“ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•å·¥ä½œåŒºç”¨æ¥æ¨¡æ‹Ÿå…¶ä»–äººå¦‚ä½•åœ¨çœŸå®çš„é¡¹ç›®ä¸­ä½¿ç”¨æˆ‘ä»¬çš„åº“ã€‚

### åˆ›å»ºä¸€ä¸ªæµ‹è¯•å·¥ä½œåŒº

åœ¨åˆ›é€ æ–°çš„æµ‹è¯•å·¥ä½œåŒºä¹‹å‰ï¼Œå…ˆç¡®å®šæ–‡ä»¶ç›®å½•ä¸åœ¨ä½ çš„ example-ng6-lib å·¥ä½œåŒºå†…ã€‚ç¡®ä¿æµ‹è¯•å·¥ä½œåŒºåœ¨ example-ng6-lib å·¥ä½œåŒºçš„çˆ¶çº§ç›®å½•ä¸‹ã€‚ç„¶åä½¿ç”¨ Angular CLI åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œåŒºä½œä¸ºå·²æœ‰çš„ example-ng6-lib å·¥ä½œåŒºçš„å…„å¼Ÿå·¥ä½œåŒºã€‚

```bash
ng new lib-tester
cd lib-tester
ng serve
```

å¦‚æœä½ éœ€è¦æä¾›å¯¹IEæµè§ˆå™¨çš„æ”¯æŒï¼ŒæŸ¥çœ‹è¿™ç¯‡æ–‡ç«  [Angular ä¸ IE](https://blog.angularindepth.com/angular-and-internet-explorer-5e59bb6fb4e9)ã€‚

å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨å¹¶æŒ‡å‘ [http://localhost:4200/](http://localhost:4200/)ï¼Œæˆ‘ä»¬çœ‹åˆ°é»˜è®¤çš„ Angular åˆå§‹é¡µé¢ã€‚

### å®‰è£…åº“

ç°åœ¨æˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†æµ‹è¯•åº”ç”¨å¹¶å¸Œæœ›åœ¨åº”ç”¨ä¸­ä½¿ç”¨åº“çš„å†…å®¹ã€‚æˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
npm install ../example-ng6-lib/dist/example-ng6-lib/example-ng6-lib-0.0.1.tgz
```

æ‰“å¼€ lib-tester å·¥ä½œåŒºçš„ä¸‹çš„ package.json æ–‡ä»¶ï¼Œä½ ä¼šçœ‹åˆ° example-ng6-lib å·²ç»è¢«æ·»åŠ åˆ°é¡¹ç›®çš„ä¾èµ–é¡¹ä¸­äº†ã€‚æˆ‘çš„ package.json æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š

```json
"dependencies": {
  "@angular/animations": "^6.0.3",
  "@angular/common": "^6.0.3",
  "@angular/compiler": "^6.0.3",
  "@angular/core": "^6.0.3",
  "@angular/forms": "^6.0.3",
  "@angular/http": "^6.0.3",
  "@angular/platform-browser": "^6.0.3",
  "@angular/platform-browser-dynamic": "^6.0.3",
  "@angular/router": "^6.0.3",
  "core-js": "^2.5.4",
  "example-ng6-lib": "file:../example-ng6-lib/dist/example-ng6-lib/example-ng6-lib-0.0.1.tgz",
  "rxjs": "^6.0.0",
  "zone.js": "^0.8.26"
},
```

å¦‚æœä½ æŸ¥çœ‹æµ‹è¯•å·¥ä½œåŒºå†…çš„ node_modules æ–‡ä»¶ç›®å½•ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå’Œåº“ç›¸å¯¹åº”å¾— **example-ng6-lib** æ–‡ä»¶å¤¹ã€‚

è­¦å‘Šï¼šè·ç¦»æˆ‘ç¬¬ä¸€æ¬¡åˆ›é€ åº“å·²ç»å¾ˆä¹…äº†ï¼Œé‚£æ—¶å€™æˆ‘è¿˜ä¸æ¸…æ¥š npm ä¸­å¯èƒ½å­˜åœ¨çš„é£é™©ï¼Œæ‰€ä»¥æˆ‘æƒ³ï¼šâ€ç­‰ç­‰ï¼Œæˆ‘æ˜¯ä¸æ˜¯å¯ä»¥ç”¨ npm ç›´æ¥å®‰è£…åº“é¡¹ç›®çš„ dist ç›®å½•è€Œéå…¶æ‰“åŒ…çš„æ–‡ä»¶ï¼Ÿè¿™æ ·çš„è¯æ˜¯ä¸æ˜¯å½“æˆ‘æ›´æ–°æˆ‘çš„åº“æ—¶ï¼Œæµ‹è¯•åº”ç”¨ä¹Ÿä¸€å¹¶å¯ä»¥è·å–é‚£äº›æ›´æ–°â€œã€‚é™¤éä½ çš„å¤´ç‰¹åˆ«é“ï¼Œåˆå–œæ¬¢å’Œå¥‡æ€ªçš„ç¬¬ä¸‰æ–¹å¼•å…¥é”™è¯¯ä½œæ–—äº‰ï¼Œå¦åˆ™ä¸€å®šä¸è¦åƒæˆ‘åˆšåˆšè¯´çš„é‚£æ ·åšã€‚æˆ‘è­¦å‘Šè¿‡ä½ äº†ğŸ˜ã€‚

> æ€»æ˜¯ï¼å®‰è£…åº“çš„ .tgz åŒ…è€Œä¸æ˜¯åº“çš„ dist ç›®å½•ã€‚

### å¼•å…¥åº“æ¨¡å—

ä¸ºäº†ä½¿ç”¨åº“ä¸­çš„ç»„ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å‘ App module ä¸­æ·»åŠ åº“çš„ moduleã€‚

ä¸ºæ­¤æˆ‘ä»¬éœ€è¦åœ¨ **src\app\app.module.ts** æ–‡ä»¶ä¸­ä½œå‡ºä¸¤å¤„ä¿®æ”¹ï¼š

1. å¼•å…¥ **ExampleNg6LibModule** æ¨¡å—

```ts
import { ExampleNg6LibModule } from 'example-ng6-lib';
```

2. å°† **ExampleNg6LibModule** æ¨¡å—åŠ å…¥åˆ° **AppModule** çš„ `imports` æ•°ç»„ä¸­ã€‚

ç°åœ¨ **app.module.ts** åº”å¦‚ä¸‹æ‰€ç¤ºï¼š

```ts
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';

import { AppComponent } from './app.component';
import { ExampleNg6LibModule } from 'example-ng6-lib';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,
    ExampleNg6LibModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
```

### ä½¿ç”¨ä¸€ä¸ªåº“ä¸­çš„ç»„ä»¶

ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥åƒç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡é‚£æ ·ï¼Œä½¿ç”¨åº“ä¸­çš„ **enl-foo** ç»„ä»¶äº†ã€‚åœ¨ lib-tester åº”ç”¨ä¸­ä¿®æ”¹ **AppComponent** ç»„ä»¶çš„ html æ¨¡æ¿æ–‡ä»¶å¹¶å±•ç¤ºæºè‡ªäºåº“çš„ **foo** ç»„ä»¶ã€‚ä¿®æ”¹åçš„ **app.component.html** æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š

```html
<div style="text-align:center">
  <h1>
    Welcome to {{ title }}!
  </h1>
  <enl-foo></enl-foo>
</div>
```

æœ€åæˆ‘ä»¬å°†æµè§ˆå™¨æŒ‡å‘ç†Ÿæ‚‰çš„ [http://localhost:4200/](http://localhost:4200/) åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° lib-tester åº”ç”¨æ­£ç¡®åœ°æ˜¾ç¤ºäº†æºè‡ªäºåº“ä¸­çš„ foo ç»„ä»¶ã€‚

<p align="center"> 
    <img src="../assets/angular-83/2.png">
</p>

åˆ°æ­¤ä¸ºæ­¢ï¼Œä½ åº”è¯¥å·²ç»å­¦ä¼šäº†å¦‚ä½•å¯¹åº“è¿›è¡Œæ„å»ºå’Œæ‰“åŒ…ã€‚

## æœŸå¾…

åœ¨æœ¬ç³»åˆ—çš„[ç¬¬ä¸‰éƒ¨åˆ†](https://blog.angularindepth.com/the-angular-library-series-publishing-ce24bb673275)ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šè®¨è®ºä¸€äº›è½»æ¾çš„è¯é¢˜ï¼Œå¸®åŠ©ä½ å°†åº“å‘å¸ƒåˆ° npm ä¸Šä»¥ä¾›ä¸‹è½½ã€‚